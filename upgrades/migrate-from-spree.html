<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guidelines | Migrate from Spree</title>
    <meta name="description" content="Developer Guides for Solidus">
    <link rel="shortcut icon" href="/solidus/favicon.ico">
  <link rel="apple-touch-icon" href="/solidus/apple-touch-icon.png">
    
    <link rel="preload" href="/solidus/assets/css/73.styles.eab8b2ae.css" as="style"><link rel="preload" href="/solidus/assets/js/app.8a40fd93.js" as="script"><link rel="preload" href="/solidus/assets/js/6.6430c6fd.js" as="script"><link rel="prefetch" href="/solidus/assets/js/37.b74e6c67.js"><link rel="prefetch" href="/solidus/assets/js/1.bc8aaa90.js"><link rel="prefetch" href="/solidus/assets/js/2.d4e88151.js"><link rel="prefetch" href="/solidus/assets/js/3.e88dfa7e.js"><link rel="prefetch" href="/solidus/assets/js/4.7b7ea6ef.js"><link rel="prefetch" href="/solidus/assets/js/5.8bb30487.js"><link rel="prefetch" href="/solidus/assets/js/7.573fb1d2.js"><link rel="prefetch" href="/solidus/assets/js/8.9360dac4.js"><link rel="prefetch" href="/solidus/assets/js/9.bc0513d0.js"><link rel="prefetch" href="/solidus/assets/js/10.9de329d0.js"><link rel="prefetch" href="/solidus/assets/js/11.3ef794fe.js"><link rel="prefetch" href="/solidus/assets/js/12.a9f19247.js"><link rel="prefetch" href="/solidus/assets/js/13.10bdcfc3.js"><link rel="prefetch" href="/solidus/assets/js/14.baeb49cf.js"><link rel="prefetch" href="/solidus/assets/js/15.4d27d13f.js"><link rel="prefetch" href="/solidus/assets/js/16.4dbd3af2.js"><link rel="prefetch" href="/solidus/assets/js/17.96a840b0.js"><link rel="prefetch" href="/solidus/assets/js/18.7af603a9.js"><link rel="prefetch" href="/solidus/assets/js/19.944f2391.js"><link rel="prefetch" href="/solidus/assets/js/20.0d3a03ca.js"><link rel="prefetch" href="/solidus/assets/js/21.6f8a3623.js"><link rel="prefetch" href="/solidus/assets/js/22.1ab16961.js"><link rel="prefetch" href="/solidus/assets/js/23.c5a09552.js"><link rel="prefetch" href="/solidus/assets/js/24.01d33ebc.js"><link rel="prefetch" href="/solidus/assets/js/25.368e20d3.js"><link rel="prefetch" href="/solidus/assets/js/26.0ff243dc.js"><link rel="prefetch" href="/solidus/assets/js/27.379ef86c.js"><link rel="prefetch" href="/solidus/assets/js/28.b1d94d4e.js"><link rel="prefetch" href="/solidus/assets/js/29.a582c0f5.js"><link rel="prefetch" href="/solidus/assets/js/30.75b3694e.js"><link rel="prefetch" href="/solidus/assets/js/31.32737bfe.js"><link rel="prefetch" href="/solidus/assets/js/32.68e6e17c.js"><link rel="prefetch" href="/solidus/assets/js/33.1e8efaaa.js"><link rel="prefetch" href="/solidus/assets/js/34.349d8482.js"><link rel="prefetch" href="/solidus/assets/js/35.78fdbd6e.js"><link rel="prefetch" href="/solidus/assets/js/36.0b2759fa.js"><link rel="prefetch" href="/solidus/assets/js/0.594398bd.js"><link rel="prefetch" href="/solidus/assets/js/38.bccdd185.js"><link rel="prefetch" href="/solidus/assets/js/39.ad7f257e.js"><link rel="prefetch" href="/solidus/assets/js/40.18604395.js"><link rel="prefetch" href="/solidus/assets/js/41.0e64d55c.js"><link rel="prefetch" href="/solidus/assets/js/42.83301a40.js"><link rel="prefetch" href="/solidus/assets/js/43.f596cdc7.js"><link rel="prefetch" href="/solidus/assets/js/44.07f48a7c.js"><link rel="prefetch" href="/solidus/assets/js/45.a59da533.js"><link rel="prefetch" href="/solidus/assets/js/46.adca66b1.js"><link rel="prefetch" href="/solidus/assets/js/47.61b9b3b8.js"><link rel="prefetch" href="/solidus/assets/js/48.94da6411.js"><link rel="prefetch" href="/solidus/assets/js/49.045da191.js"><link rel="prefetch" href="/solidus/assets/js/50.4aa1c95a.js"><link rel="prefetch" href="/solidus/assets/js/51.3f25a7cb.js"><link rel="prefetch" href="/solidus/assets/js/52.7fc3e97e.js"><link rel="prefetch" href="/solidus/assets/js/53.478f3a20.js"><link rel="prefetch" href="/solidus/assets/js/54.bee46771.js"><link rel="prefetch" href="/solidus/assets/js/55.d22fc5aa.js"><link rel="prefetch" href="/solidus/assets/js/56.2779de7d.js"><link rel="prefetch" href="/solidus/assets/js/57.9229e917.js"><link rel="prefetch" href="/solidus/assets/js/58.53b44760.js"><link rel="prefetch" href="/solidus/assets/js/59.b4ab94d2.js"><link rel="prefetch" href="/solidus/assets/js/60.024d7dba.js"><link rel="prefetch" href="/solidus/assets/js/61.c0c81db2.js"><link rel="prefetch" href="/solidus/assets/js/62.9766010b.js"><link rel="prefetch" href="/solidus/assets/js/63.a22ac1c9.js"><link rel="prefetch" href="/solidus/assets/js/64.711f7334.js"><link rel="prefetch" href="/solidus/assets/js/65.0f534f00.js"><link rel="prefetch" href="/solidus/assets/js/66.e38c54e1.js"><link rel="prefetch" href="/solidus/assets/js/67.a395f431.js"><link rel="prefetch" href="/solidus/assets/js/68.f86e2d51.js"><link rel="prefetch" href="/solidus/assets/js/69.6f1fc43a.js"><link rel="prefetch" href="/solidus/assets/js/70.944af6a0.js"><link rel="prefetch" href="/solidus/assets/js/71.1f9a1de8.js"><link rel="prefetch" href="/solidus/assets/js/72.3e4d2c2a.js">
    <link rel="stylesheet" href="/solidus/assets/css/73.styles.eab8b2ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/solidus/" class="home-link router-link-active"><img src="/solidus/logo.svg" class="logo"><span class="site-name can-hide">
      Guidelines
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/solidus/" class="nav-link">Home</a></div><a href="https://github.com/solidusio/solidus" target="_blank" rel="noopener noreferrer" class="github-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/solidus/" class="nav-link">Home</a></div><a href="https://github.com/solidusio/solidus" target="_blank" rel="noopener noreferrer" class="github-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Getting Started</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preferences</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Locations</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Payments</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Taxation</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Shipments</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Calculators</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Assets</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Views</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Products and Variants</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Inventory</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Returns</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Promotions</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Adjustments</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Orders</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Returns</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Users</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Upgrades</span><span class="arrow up"></span></p><ul class="sidebar-group-items"><li><a href="/solidus/upgrades/overview.html" class="sidebar-link">Upgrades</a></li><li><a href="/solidus/upgrades/migrate-from-spree.html" class="active sidebar-link">Migrate from Spree</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/solidus/upgrades/migrate-from-spree.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/solidus/upgrades/migrate-from-spree.html#required-reading" class="sidebar-link">Required reading</a></li><li class="sidebar-sub-header"><a href="/solidus/upgrades/migrate-from-spree.html#process" class="sidebar-link">Process</a></li><li class="sidebar-sub-header"><a href="/solidus/upgrades/migrate-from-spree.html#migrating-from-spree-3-0-or-newer" class="sidebar-link">Migrating from Spree 3.0 or newer</a></li></ul></li><li><a href="/solidus/upgrades/versioning-guidelines.html" class="sidebar-link">Versioning guidelines</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Extensions</span><span class="arrow down"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="migrate-from-spree"><a href="#migrate-from-spree" aria-hidden="true" class="header-anchor">#</a> Migrate from Spree</h1><p>You can migrate your Spree store to Solidus. This article outlines what you
need, how to migrate, and the common problems you should be aware of before
making the switch.</p><p>Note that most migrations are not a one-click process. Every store is different
and will have different requirements.</p><h2 id="prerequisites"><a href="#prerequisites" aria-hidden="true" class="header-anchor">#</a> Prerequisites</h2><ul><li>Familiarity with Ruby on Rails.</li><li>Familiarity with your Rails application and your store's database.</li><li>A store running on Spree 2.2, 2.3, or 2.4.</li><li>A Rails application that can readily be upgraded from 4.1.x to a newer
version.</li></ul><p>If your store uses an earlier version of Spree, consider upgrading to 2.4 before
you start the migration process. If your store runs 3.0 or newer, see our note
about <a href="#migrating-from-spree-3-0-or-newer">migrating from Spree 3.0 or newer</a>.</p><p>Remember that you should <strong>always back up your databases before attempting a
migration in a production environment.</strong></p><h2 id="required-reading"><a href="#required-reading" aria-hidden="true" class="header-anchor">#</a> Required reading</h2><ul><li><a href="http://guides.rubyonrails.org/upgrading_ruby_on_rails.html" target="_blank" rel="noopener noreferrer">The Rails Upgrade Guide</a></li><li><a href="https://www.justinweiss.com/articles/how-to-upgrade-to-rails-4-dot-2/" target="_blank" rel="noopener noreferrer">How to upgrade to Rails 4.2</a></li></ul><h2 id="process"><a href="#process" aria-hidden="true" class="header-anchor">#</a> Process</h2><p><em>This article walks you through a basic migration from Spree 2.4 to Solidus 1.4.
Note that if you have customized your Spree-based store, or you use another
version of Spree, this article may not include additional migration steps that
you need to perform. After you have successfully upgraded to Solidus 1.4, you
can <a href="#upgrade-solidus-incrementally">incrementally upgrade to the most recent
version</a>.</em></p><p>You are running a store on Spree 2.4.4. You use the standard <code>spree_auth_devise</code>
gem for authentication, and your application runs on Rails 4.1.x. Your <code>Gemfile</code>
has the following lines:</p><pre class="language-ruby"><code>gem <span class="token string">'spree'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 2.4.0'</span>
gem <span class="token string">'spree_auth_devise'</span><span class="token punctuation">,</span> github<span class="token punctuation">:</span> <span class="token string">'spree/spree_auth_devise'</span><span class="token punctuation">,</span> branch<span class="token punctuation">:</span> <span class="token string">'2-4-stable'</span>

gem <span class="token string">'rails'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 4.1.0'</span>
</code></pre><p>You want to migrate from Spree to Solidus. To make the upgrade process more
straightforward, you plan to migrate to Solidus 1.4 before upgrading to Solidus
2.0 and beyond.</p><h3 id="replace-spree-gems-in-your-gemfile"><a href="#replace-spree-gems-in-your-gemfile" aria-hidden="true" class="header-anchor">#</a> Replace Spree gems in your Gemfile</h3><p>First, replace the Spree gems in your <code>Gemfile</code>. In their place, you are going
to add Solidus gems locked to their <code>1.4</code> versions. You may want to keep the
lines from your Spree gems commented out for reference:</p><pre class="language-ruby"><code>gem <span class="token string">'solidus'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 1.4.0'</span>
gem <span class="token string">'solidus_auth_devise'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 1.4.0'</span>

<span class="token comment"># gem 'spree', '~&gt; 2.4.0'</span>
<span class="token comment"># gem 'spree_auth_devise', github: 'spree/spree_auth_devise', branch: '2-4-stable'</span>
</code></pre><h3 id="prepare-to-upgrade-rails-to-4-2-x"><a href="#prepare-to-upgrade-rails-to-4-2-x" aria-hidden="true" class="header-anchor">#</a> Prepare to upgrade Rails to 4.2.x</h3><p>If you attempt to run <code>bundle update</code> at this point, notice that Bundler runs
into a number of dependency issues. Next, you need to upgrade to Rails 4.2 for
this migration.</p><p>Update the Rails version in your <code>Gemfile</code> to <code>~&gt; 4.2.0</code>:</p><pre class="language-ruby"><code>gem <span class="token string">'rails'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 4.2.0'</span>
</code></pre><p>Note that upgrading Rails affects many other gem versions in your application.</p><p>If you use Rails's default asset pipeline, for example, we recommend that you
explicitly update the versions of the <code>sass-rails</code> gem in your <code>Gemfile</code>, as
well as explicitly setting the versions for the dependencies <code>sprockets</code> and
<code>bourbon</code>:</p><pre class="language-ruby"><code>gem <span class="token string">'sprockets'</span><span class="token punctuation">,</span> <span class="token string">'2.11.0'</span>
gem <span class="token string">'bourbon'</span><span class="token punctuation">,</span> <span class="token string">'&lt; 5.0.0'</span>
gem <span class="token string">'sass-rails'</span><span class="token punctuation">,</span> <span class="token string">'~&gt; 4.0.0'</span>
</code></pre><h3 id="run-bundle-update"><a href="#run-bundle-update" aria-hidden="true" class="header-anchor">#</a> Run bundle update</h3><p>After you have replaced the Spree gems in your <code>Gemfile</code> and prepared to upgrade
Rails to 4.2.x, you can update your application with Bundler:</p><pre class="language-bash"><code>bundle update
</code></pre><p>At this point, the update should run successfully. If it does not, check your
<code>Gemfile</code> for other gems that require specific updates to their dependencies.</p><h3 id="install-solidus-migrations"><a href="#install-solidus-migrations" aria-hidden="true" class="header-anchor">#</a> Install Solidus migrations</h3><p>Now that you have successfully installed the Solidus gems, you need to copy all
of the Solidus-specific migrations into your application:</p><pre class="language-bash"><code>bundle <span class="token function">exec</span> rake railties:install:migrations
</code></pre><h3 id="start-the-solidus-installation-process"><a href="#start-the-solidus-installation-process" aria-hidden="true" class="header-anchor">#</a> Start the Solidus installation process</h3><p>Now that your Spree store includes Solidus and its migrations, you can start the
Solidus install process:</p><ol><li>Run <code>bundle exec rails generate spree:install</code>.</li><li>Run <code>bundle exec rails generate solidus:auth:install</code>.</li><li>Run <code>bundle exec rake db:migrate</code>.</li></ol><p>During the <code>rails generate spree:install</code> step, Rails should prompt you to
overwrite some configuration files:</p><ul><li><code>/config/initializers/spree.rb</code>: Adds additional default configuration
settings for Solidus gems.</li><li><code>/vendor/assets/javascripts/spree/frontend/all.js</code>: Removes an empty line.</li><li><code>/vendor/assets/stylesheets/spree/frontend/all.css</code>: Removes an empty line.</li><li><code>/vendor/assets/javascripts/spree/backend/all.js</code>: Removes an empty line.</li><li><code>/vendor/assets/stylesheets/spree/backend/all.css</code>: Removes an empty line.</li></ul><p>You can respond to the prompt with <code>d</code> to see a diff of the changes to each
file.</p><p>The <code>rails generate spree:install</code> step also asks if you would like to create
another admin user. However, you can safely continue using the admin user from
Spree.</p><h3 id="manage-deprecation-warnings"><a href="#manage-deprecation-warnings" aria-hidden="true" class="header-anchor">#</a> Manage deprecation warnings</h3><p>After upgrading your Spree 2.4 application to Solidus 1.4, you may see some
deprecation warnings. The amount of deprecation warnings depends on how many
Spree features you use that are being deprecated in Solidus, as well as
additional gems your application uses.</p><p>If you plan to upgrade to Solidus 2.0, you need to deal with the deprecated code
within your application code. The warnings should give you straightforward
solutions.</p><p>For deprecation warnings that come from specific gems, you may be able to get
rid of them by simply upgrading those gems.</p><h3 id="upgrade-solidus-incrementally"><a href="#upgrade-solidus-incrementally" aria-hidden="true" class="header-anchor">#</a> Upgrade Solidus incrementally</h3><p>Now that you have transitioned from Spree to Solidus, you upgrade from Solidus
1.4 to the next major version: 2.0. From 2.0, you can upgrade to each minor
version incrementally until you are at the newest version.</p><p>Upgrading incrementally is less risky than upgrading straight from 1.4 to 2.4.
It ensures that you have all of the necessary migrations and don't inadvertently
break existing functionality in your application code.</p><p>Use the notes in <a href="https://github.com/solidusio/solidus/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">Solidus's changelog</a> to help you upgrade to each
minor version of Solidus gracefully.</p><h2 id="migrating-from-spree-3-0-or-newer"><a href="#migrating-from-spree-3-0-or-newer" aria-hidden="true" class="header-anchor">#</a> Migrating from Spree 3.0 or newer</h2><p>Solidus is a fork of Spree 2.4. After Spree 2.4, the Spree and Solidus code
bases start to diverge. For example, Spree 3.0 introduces a Bootstrap-based
frontend and backend which is significantly different than Solidus's frontend
and backend.</p><p>If you run Spree 3.0 and want to migrate, we suggest that you upgrade to some
intermediate versions of Solidus first:</p><ol><li>Upgrade to Solidus 1.4 first. This is the last version of Solidus that uses
Rails 4.2.</li><li>Upgrade from Solidus 1.4 to Solidus 2.0, which runs on Rails 5.0.</li><li>Upgrade from Solidus 2.0 to Solidus 2.1. Solidus 2.1 removes methods that
were deprecated in Solidus 1.4.</li></ol></div><div class="content edit-link"><a href="https://github.com/solidusio/solidus/edit/master/guides/upgrades/migrate-from-spree.md" target="_blank" rel="noopener noreferrer">Edit this page</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/solidus/upgrades/overview.html" class="prev">
          Upgrades
        </a></span><span class="next"><a href="/solidus/upgrades/versioning-guidelines.html">
          Versioning guidelines
        </a> →
      </span></p></div></div></div></div>
    <script src="/solidus/assets/js/6.6430c6fd.js" defer></script><script src="/solidus/assets/js/app.8a40fd93.js" defer></script>
  </body>
</html>
