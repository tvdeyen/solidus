(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{75:function(e,s,t){"use strict";t.r(s);var a=t(0),n=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"class-extension-points"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-extension-points","aria-hidden":"true"}},[e._v("#")]),e._v(" Class extension points")]),t("p",[e._v("The "),t("code",[e._v("Spree::AppConfiguration")]),e._v(" object includes getters and setters for Solidus\nclasses as extension points.")]),t("p",[e._v("Before extending any class, study the standard implementation of it carefully.\nOnce you understand the implementation, you can use Solidus's provided extension\npoints to subclass or re-implement it for your store.")]),t("p",[e._v("Solidus's service class extension points can be found as part of the\n"),t("a",{attrs:{href:"https://github.com/solidusio/solidus/blob/master/core/lib/spree/app_configuration.rb",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Spree::AppConfiguration")])]),e._v(" object, where each line that\nbegins with "),t("code",[e._v("class_name_attribute")]),e._v(" defines a different extension point.")]),t("h2",{attrs:{id:"example-usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-usage","aria-hidden":"true"}},[e._v("#")]),e._v(" Example usage")]),t("p",[e._v("When you extend a class, you can change the behavior of a single feature or your\nentire store.")]),t("p",[e._v("For example, you can change what appears in a customer's search results by\nextending the "),t("a",{attrs:{href:"https://github.com/solidusio/solidus/blob/master/core/lib/spree/base.rb",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Spree::Core::Search::Base")])]),e._v(". This way, you do not\nneed to completely rewrite Solidus's searcher. Solidus provides a class\nextension point for this:")]),t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{attrs:{class:"token comment"}},[e._v("# /core/lib/spree/app_configuration.rb")]),e._v("\nclass_name_attribute "),t("span",{attrs:{class:"token symbol"}},[e._v(":searcher_class")]),t("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" default"),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{attrs:{class:"token string"}},[e._v("'Spree::Core::Search::Base'")]),e._v("\n")])]),t("p",[e._v("Note that if that you do not use this extension point, then "),t("code",[e._v("searcher_class")]),e._v("\ndefaults to using "),t("code",[e._v("Spree::Core::Search::Base")]),e._v(".")]),t("p",[e._v("Extending the searcher is a multi-step process:")]),t("ol",[t("li",[e._v("Create a custom searcher for your store at "),t("code",[e._v("/lib/mystore/product_search.rb")]),e._v(".")]),t("li",[e._v("Define a private "),t("code",[e._v("get_base_scope")]),e._v(" method to override in classes that inherit\nfrom "),t("code",[e._v("Spree::Core::Search::Base")]),e._v(".")]),t("li",[e._v("Connect your searcher to the "),t("code",[e._v(":searcher_class")]),e._v(" extension point in the Solidus\ninitializer at "),t("code",[e._v("config/initializers/spree.rb")]),e._v(".")])]),t("p",[e._v("In your "),t("code",[e._v("MyStore::ProductSearch")]),e._v(" class, rewrite the\n"),t("code",[e._v("Spree::Core::Search::Base")]),e._v("'s "),t("code",[e._v("get_base_scope")]),e._v(" method with our desired\nfunctionality:")]),t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{attrs:{class:"token comment"}},[e._v("# /lib/mystore/product_search.rb")]),e._v("\n"),t("span",{attrs:{class:"token keyword"}},[e._v("module")]),e._v(" "),t("span",{attrs:{class:"token constant"}},[e._v("MyStore")]),e._v("\n  "),t("span",{attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),t("span",{attrs:{class:"token class-name"}},[e._v("ProductSearch")]),e._v(" "),t("span",{attrs:{class:"token operator"}},[e._v("<")]),e._v(" "),t("span",{attrs:{class:"token constant"}},[e._v("Spree")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token constant"}},[e._v("Core")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token constant"}},[e._v("Search")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token constant"}},[e._v("Base")]),e._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[e._v("private")]),e._v("\n\n    "),t("span",{attrs:{class:"token keyword"}},[e._v("def")]),e._v(" get_base_scope\n      "),t("span",{attrs:{class:"token keyword"}},[e._v("super")]),t("span",{attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{attrs:{class:"token function"}},[e._v("where")]),t("span",{attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{attrs:{class:"token string"}},[e._v("\"name LIKE '%rails%'\"")]),t("span",{attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),t("span",{attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n  "),t("span",{attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n"),t("span",{attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n")])]),t("p",[e._v("This searcher only displays search results that pass on to the "),t("code",[e._v("base_scope")]),e._v("\nvariable and have the string "),t("code",[e._v("rails")]),e._v(" in their name.")]),t("p",[e._v("Then, you can apply your searcher to the extension point in your\n"),t("code",[e._v("config/initializers/spree.rb")]),e._v(" initializer:")]),t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{attrs:{class:"token comment"}},[e._v("# /config/initializers/spree.rb")]),e._v("\n"),t("span",{attrs:{class:"token keyword"}},[e._v("require")]),e._v(" "),t("span",{attrs:{class:"token string"}},[e._v("'my_store/product_search'")]),e._v("\n\n"),t("span",{attrs:{class:"token constant"}},[e._v("Spree")]),t("span",{attrs:{class:"token punctuation"}},[e._v(".")]),e._v("config "),t("span",{attrs:{class:"token keyword"}},[e._v("do")]),e._v(" "),t("span",{attrs:{class:"token operator"}},[e._v("|")]),e._v("config"),t("span",{attrs:{class:"token operator"}},[e._v("|")]),e._v("\n  config"),t("span",{attrs:{class:"token punctuation"}},[e._v(".")]),e._v("searcher_class "),t("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{attrs:{class:"token constant"}},[e._v("MyStore")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{attrs:{class:"token constant"}},[e._v("ProductSearch")]),e._v("\n"),t("span",{attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n")])]),t("p",[e._v("Now, when search is built it uses your extended "),t("code",[e._v("MyStore::ProductSearch")]),e._v("\nfunctionality instead of the default functionality.")]),t("h2",{attrs:{id:"generating-extension-points"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generating-extension-points","aria-hidden":"true"}},[e._v("#")]),e._v(" Generating extension points")]),t("p",[e._v("If you see yourself overriding a class with a definable interface, and there is\nno associated extension point, "),t("a",{attrs:{href:"https://github.com/solidusio/solidus/blob/master/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("consider submitting a pull\nrequest")]),e._v(" for your changeable class.")])])}],!1,null,null,null);s.default=n.exports}}]);