(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{120:function(e,t,s){"use strict";s.r(t);var a=s(0),r=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"migrate-from-spree"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#migrate-from-spree","aria-hidden":"true"}},[e._v("#")]),e._v(" Migrate from Spree")]),s("p",[e._v("You can migrate your Spree store to Solidus. This article outlines what you\nneed, how to migrate, and the common problems you should be aware of before\nmaking the switch.")]),s("p",[e._v("Note that most migrations are not a one-click process. Every store is different\nand will have different requirements.")]),s("h2",{attrs:{id:"prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[e._v("#")]),e._v(" Prerequisites")]),s("ul",[s("li",[e._v("Familiarity with Ruby on Rails.")]),s("li",[e._v("Familiarity with your Rails application and your store's database.")]),s("li",[e._v("A store running on Spree 2.2, 2.3, or 2.4.")]),s("li",[e._v("A Rails application that can readily be upgraded from 4.1.x to a newer\nversion.")])]),s("p",[e._v("If your store uses an earlier version of Spree, consider upgrading to 2.4 before\nyou start the migration process. If your store runs 3.0 or newer, see our note\nabout "),s("a",{attrs:{href:"#migrating-from-spree-3-0-or-newer"}},[e._v("migrating from Spree 3.0 or newer")]),e._v(".")]),s("p",[e._v("Remember that you should "),s("strong",[e._v("always back up your databases before attempting a\nmigration in a production environment.")])]),s("h2",{attrs:{id:"required-reading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#required-reading","aria-hidden":"true"}},[e._v("#")]),e._v(" Required reading")]),s("ul",[s("li",[s("a",{attrs:{href:"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("The Rails Upgrade Guide")])]),s("li",[s("a",{attrs:{href:"https://www.justinweiss.com/articles/how-to-upgrade-to-rails-4-dot-2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to upgrade to Rails 4.2")])])]),s("h2",{attrs:{id:"process"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#process","aria-hidden":"true"}},[e._v("#")]),e._v(" Process")]),s("p",[s("em",[e._v("This article walks you through a basic migration from Spree 2.4 to Solidus 1.4.\nNote that if you have customized your Spree-based store, or you use another\nversion of Spree, this article may not include additional migration steps that\nyou need to perform. After you have successfully upgraded to Solidus 1.4, you\ncan "),s("a",{attrs:{href:"#upgrade-solidus-incrementally"}},[e._v("incrementally upgrade to the most recent\nversion")]),e._v(".")])]),s("p",[e._v("You are running a store on Spree 2.4.4. You use the standard "),s("code",[e._v("spree_auth_devise")]),e._v("\ngem for authentication, and your application runs on Rails 4.1.x. Your "),s("code",[e._v("Gemfile")]),e._v("\nhas the following lines:")]),s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[e._v("gem "),s("span",{attrs:{class:"token string"}},[e._v("'spree'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'~> 2.4.0'")]),e._v("\ngem "),s("span",{attrs:{class:"token string"}},[e._v("'spree_auth_devise'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" github"),s("span",{attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'spree/spree_auth_devise'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" branch"),s("span",{attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'2-4-stable'")]),e._v("\n\ngem "),s("span",{attrs:{class:"token string"}},[e._v("'rails'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'~> 4.1.0'")]),e._v("\n")])]),s("p",[e._v("You want to migrate from Spree to Solidus. To make the upgrade process more\nstraightforward, you plan to migrate to Solidus 1.4 before upgrading to Solidus\n2.0 and beyond.")]),s("h3",{attrs:{id:"replace-spree-gems-in-your-gemfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replace-spree-gems-in-your-gemfile","aria-hidden":"true"}},[e._v("#")]),e._v(" Replace Spree gems in your Gemfile")]),s("p",[e._v("First, replace the Spree gems in your "),s("code",[e._v("Gemfile")]),e._v(". In their place, you are going\nto add Solidus gems locked to their "),s("code",[e._v("1.4")]),e._v(" versions. You may want to keep the\nlines from your Spree gems commented out for reference:")]),s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[e._v("gem "),s("span",{attrs:{class:"token string"}},[e._v("'solidus'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'~> 1.4.0'")]),e._v("\ngem "),s("span",{attrs:{class:"token string"}},[e._v("'solidus_auth_devise'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'~> 1.4.0'")]),e._v("\n\n"),s("span",{attrs:{class:"token comment"}},[e._v("# gem 'spree', '~> 2.4.0'")]),e._v("\n"),s("span",{attrs:{class:"token comment"}},[e._v("# gem 'spree_auth_devise', github: 'spree/spree_auth_devise', branch: '2-4-stable'")]),e._v("\n")])]),s("h3",{attrs:{id:"prepare-to-upgrade-rails-to-4-2-x"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prepare-to-upgrade-rails-to-4-2-x","aria-hidden":"true"}},[e._v("#")]),e._v(" Prepare to upgrade Rails to 4.2.x")]),s("p",[e._v("If you attempt to run "),s("code",[e._v("bundle update")]),e._v(" at this point, notice that Bundler runs\ninto a number of dependency issues. Next, you need to upgrade to Rails 4.2 for\nthis migration.")]),s("p",[e._v("Update the Rails version in your "),s("code",[e._v("Gemfile")]),e._v(" to "),s("code",[e._v("~> 4.2.0")]),e._v(":")]),s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[e._v("gem "),s("span",{attrs:{class:"token string"}},[e._v("'rails'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'~> 4.2.0'")]),e._v("\n")])]),s("p",[e._v("Note that upgrading Rails affects many other gem versions in your application.")]),s("p",[e._v("If you use Rails's default asset pipeline, for example, we recommend that you\nexplicitly update the versions of the "),s("code",[e._v("sass-rails")]),e._v(" gem in your "),s("code",[e._v("Gemfile")]),e._v(", as\nwell as explicitly setting the versions for the dependencies "),s("code",[e._v("sprockets")]),e._v(" and\n"),s("code",[e._v("bourbon")]),e._v(":")]),s("pre",{pre:!0,attrs:{class:"language-ruby"}},[s("code",[e._v("gem "),s("span",{attrs:{class:"token string"}},[e._v("'sprockets'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'2.11.0'")]),e._v("\ngem "),s("span",{attrs:{class:"token string"}},[e._v("'bourbon'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'< 5.0.0'")]),e._v("\ngem "),s("span",{attrs:{class:"token string"}},[e._v("'sass-rails'")]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v("'~> 4.0.0'")]),e._v("\n")])]),s("h3",{attrs:{id:"run-bundle-update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-bundle-update","aria-hidden":"true"}},[e._v("#")]),e._v(" Run bundle update")]),s("p",[e._v("After you have replaced the Spree gems in your "),s("code",[e._v("Gemfile")]),e._v(" and prepared to upgrade\nRails to 4.2.x, you can update your application with Bundler:")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("bundle update\n")])]),s("p",[e._v("At this point, the update should run successfully. If it does not, check your\n"),s("code",[e._v("Gemfile")]),e._v(" for other gems that require specific updates to their dependencies.")]),s("h3",{attrs:{id:"install-solidus-migrations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-solidus-migrations","aria-hidden":"true"}},[e._v("#")]),e._v(" Install Solidus migrations")]),s("p",[e._v("Now that you have successfully installed the Solidus gems, you need to copy all\nof the Solidus-specific migrations into your application:")]),s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("bundle "),s("span",{attrs:{class:"token function"}},[e._v("exec")]),e._v(" rake railties:install:migrations\n")])]),s("h3",{attrs:{id:"start-the-solidus-installation-process"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start-the-solidus-installation-process","aria-hidden":"true"}},[e._v("#")]),e._v(" Start the Solidus installation process")]),s("p",[e._v("Now that your Spree store includes Solidus and its migrations, you can start the\nSolidus install process:")]),s("ol",[s("li",[e._v("Run "),s("code",[e._v("bundle exec rails generate spree:install")]),e._v(".")]),s("li",[e._v("Run "),s("code",[e._v("bundle exec rails generate solidus:auth:install")]),e._v(".")]),s("li",[e._v("Run "),s("code",[e._v("bundle exec rake db:migrate")]),e._v(".")])]),s("p",[e._v("During the "),s("code",[e._v("rails generate spree:install")]),e._v(" step, Rails should prompt you to\noverwrite some configuration files:")]),s("ul",[s("li",[s("code",[e._v("/config/initializers/spree.rb")]),e._v(": Adds additional default configuration\nsettings for Solidus gems.")]),s("li",[s("code",[e._v("/vendor/assets/javascripts/spree/frontend/all.js")]),e._v(": Removes an empty line.")]),s("li",[s("code",[e._v("/vendor/assets/stylesheets/spree/frontend/all.css")]),e._v(": Removes an empty line.")]),s("li",[s("code",[e._v("/vendor/assets/javascripts/spree/backend/all.js")]),e._v(": Removes an empty line.")]),s("li",[s("code",[e._v("/vendor/assets/stylesheets/spree/backend/all.css")]),e._v(": Removes an empty line.")])]),s("p",[e._v("You can respond to the prompt with "),s("code",[e._v("d")]),e._v(" to see a diff of the changes to each\nfile.")]),s("p",[e._v("The "),s("code",[e._v("rails generate spree:install")]),e._v(" step also asks if you would like to create\nanother admin user. However, you can safely continue using the admin user from\nSpree.")]),s("h3",{attrs:{id:"manage-deprecation-warnings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#manage-deprecation-warnings","aria-hidden":"true"}},[e._v("#")]),e._v(" Manage deprecation warnings")]),s("p",[e._v("After upgrading your Spree 2.4 application to Solidus 1.4, you may see some\ndeprecation warnings. The amount of deprecation warnings depends on how many\nSpree features you use that are being deprecated in Solidus, as well as\nadditional gems your application uses.")]),s("p",[e._v("If you plan to upgrade to Solidus 2.0, you need to deal with the deprecated code\nwithin your application code. The warnings should give you straightforward\nsolutions.")]),s("p",[e._v("For deprecation warnings that come from specific gems, you may be able to get\nrid of them by simply upgrading those gems.")]),s("h3",{attrs:{id:"upgrade-solidus-incrementally"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-solidus-incrementally","aria-hidden":"true"}},[e._v("#")]),e._v(" Upgrade Solidus incrementally")]),s("p",[e._v("Now that you have transitioned from Spree to Solidus, you upgrade from Solidus\n1.4 to the next major version: 2.0. From 2.0, you can upgrade to each minor\nversion incrementally until you are at the newest version.")]),s("p",[e._v("Upgrading incrementally is less risky than upgrading straight from 1.4 to 2.4.\nIt ensures that you have all of the necessary migrations and don't inadvertently\nbreak existing functionality in your application code.")]),s("p",[e._v("Use the notes in "),s("a",{attrs:{href:"https://github.com/solidusio/solidus/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("Solidus's changelog")]),e._v(" to help you upgrade to each\nminor version of Solidus gracefully.")]),s("h2",{attrs:{id:"migrating-from-spree-3-0-or-newer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#migrating-from-spree-3-0-or-newer","aria-hidden":"true"}},[e._v("#")]),e._v(" Migrating from Spree 3.0 or newer")]),s("p",[e._v("Solidus is a fork of Spree 2.4. After Spree 2.4, the Spree and Solidus code\nbases start to diverge. For example, Spree 3.0 introduces a Bootstrap-based\nfrontend and backend which is significantly different than Solidus's frontend\nand backend.")]),s("p",[e._v("If you run Spree 3.0 and want to migrate, we suggest that you upgrade to some\nintermediate versions of Solidus first:")]),s("ol",[s("li",[e._v("Upgrade to Solidus 1.4 first. This is the last version of Solidus that uses\nRails 4.2.")]),s("li",[e._v("Upgrade from Solidus 1.4 to Solidus 2.0, which runs on Rails 5.0.")]),s("li",[e._v("Upgrade from Solidus 2.0 to Solidus 2.1. Solidus 2.1 removes methods that\nwere deprecated in Solidus 1.4.")])])])}],!1,null,null,null);t.default=r.exports}}]);