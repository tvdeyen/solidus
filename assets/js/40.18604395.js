(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{78:function(e,t,s){"use strict";s.r(t);var r=s(0),n=Object(r.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._m(1),e._m(2),e._m(3),s("ul",[e._m(4),e._m(5),s("li",[s("code",[e._v("source_type")]),e._v(" and "),s("code",[e._v("source_id")]),e._v(": The model being used as the payment source and\nits ID. For example, "),s("code",[e._v("Spree::CreditCard")]),e._v(". See the "),s("router-link",{attrs:{to:"payment-sources.html"}},[e._v("Payment\nsources")]),e._v(" article for more information.")],1),e._m(6),e._m(7),e._m(8),e._m(9),e._m(10),e._m(11)]),e._m(12),e._m(13),s("p",[e._v("While some payment service providers may not require a payment identifier, other\nservices may require or recommend them. In the past, some services have\nerroneously reported duplicate payments when not recording a payment identifier.")]),e._m(14),e._m(15),e._m(16),e._m(17),e._m(18),e._m(19),e._m(20),e._m(21),e._m(22)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"payments"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payments","aria-hidden":"true"}},[this._v("#")]),this._v(" Payments")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("The "),s("code",[e._v("Spree::Payment")]),e._v(" model in Solidus tracks payments. A new payment is created\nonce the customer has submitted their payment details during checkout. Once a\npayment's "),s("code",[e._v("state")]),e._v(" is marked as "),s("code",[e._v("completed")]),e._v(", it counts against a "),s("code",[e._v("Spree::Order")]),e._v("'s\ntotal.")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("Payments relate to a specific "),s("code",[e._v("Spree::Order")]),e._v(", as well as one of your available\n"),s("code",[e._v("Spree::PaymentMethod")]),e._v("s and a payment source (which could be a\n"),s("code",[e._v("Spree::CreditCard")]),e._v(", a "),s("code",[e._v("Spree::StoreCredit")]),e._v(" or some other non-"),s("code",[e._v("Spree")]),e._v(" model).")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("Spree::Payment")]),this._v(" objects have the following attributes:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("amount")]),this._v(": The payment amount.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("order_id")]),this._v(": The ID for the associated "),t("code",[this._v("Spree::Order")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("payment_method_id")]),this._v(": The ID for the associated "),t("code",[this._v("Spree::PaymentMethod")]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("state")]),this._v(": The payment's current state. See "),t("a",{attrs:{href:"#payment-states"}},[this._v("Payment states")]),this._v("\nfor more information.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("response_code")]),this._v(": A generalized response code or token sent by the payment\nservice provider. You should configure this based on the payment service\nprovider you are using. For example, this could be used to display a Stripe\ntransaction token in case it needs to be referenced later on.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("avs_response")]),this._v(": The AVS response code sent by the payment service provider.\nSee "),t("a",{attrs:{href:"#response-codes"}},[this._v("Response codes")]),this._v(" for more information.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("number")]),this._v(": A unique number to identify the current payment. See "),t("a",{attrs:{href:"#payment-identifiers"}},[this._v("Payment\nidentifiers")]),this._v(" for more information.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("cvv_response_code")]),this._v(" and "),t("code",[this._v("cvv_response_message")]),this._v(": The CVV2 response sent by the\npayment service provider. See "),t("a",{attrs:{href:"#response-codes"}},[this._v("Response codes")]),this._v(" for more\ninformation.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"payment-identifiers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payment-identifiers","aria-hidden":"true"}},[this._v("#")]),this._v(" Payment identifiers")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("When a "),t("code",[this._v("Spree::Payment")]),this._v(" is created, a unique, eight-character identifier is\ngenerated for the "),t("code",[this._v("number")]),this._v(" attribute. It should look something like this:\n"),t("code",[this._v("2EYGNY8D")]),this._v(". This is used when sending the payment details to the [payment\nservice provider][payment-service-providers].")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"response-codes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#response-codes","aria-hidden":"true"}},[this._v("#")]),this._v(" Response codes")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("Spree::Payment")]),this._v("s store AVS and CVV2 response codes that are sent back from the\npayment service provider. These response codes help you classify payments as\nrisky, non-risky, or invalid. See "),t("a",{attrs:{href:"https://developer.paypal.com/docs/classic/api/AVSResponseCodes/",target:"_blank",rel:"noopener noreferrer"}},[this._v("PayPal's list of AVS and CVV response\ncodes")]),this._v(" to learn more about what these codes mean.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"payment-states"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payment-states","aria-hidden":"true"}},[this._v("#")]),this._v(" Payment states")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A "),t("code",[this._v("Spree::Payment")]),this._v("'s "),t("code",[this._v("state")]),this._v(" attribute changes before and after it is sent to\nthe payment service provider. Here is an explanation for each potential state:")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("code",[e._v("checkout")]),e._v(": The "),s("code",[e._v("Spree::Order")]),e._v(" is not yet complete.")]),s("li",[s("code",[e._v("processing")]),e._v(": The payment is being processed by the payment service provider.\nThis is a temporary state intended to prevent the double-submission of a\npayment.")]),s("li",[s("code",[e._v("pending")]),e._v(": The payment service provider has processed the payment, but the\npayment is not yet captured.")]),s("li",[s("code",[e._v("failed")]),e._v(": The payment was rejected by the payment service provider.")]),s("li",[s("code",[e._v("invalid")]),e._v(": The payment is invalid and needs to be reattempted.")]),s("li",[s("code",[e._v("void")]),e._v(": The payment should not be counted against the order.")]),s("li",[s("code",[e._v("completed")]),e._v(": The payment is completed.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Note that only payments in the "),t("code",[this._v("completed")]),this._v(" state count against the order total.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"payment-event-methods"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#payment-event-methods","aria-hidden":"true"}},[this._v("#")]),this._v(" Payment event methods")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The "),t("code",[this._v("Spree::Payment")]),this._v(" model includes event methods you can use to transition from\nstate to state:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("code",[this._v("started_processing")])]),t("li",[t("code",[this._v("failure")])]),t("li",[t("code",[this._v("pend")])]),t("li",[t("code",[this._v("complete")])]),t("li",[t("code",[this._v("void")])]),t("li",[t("code",[this._v("invalidate")])])])}],!1,null,null,null);t.default=n.exports}}]);