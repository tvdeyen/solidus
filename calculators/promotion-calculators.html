<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guidelines | Promotion calculators</title>
    <meta name="description" content="Developer Guides for Solidus">
    <link rel="shortcut icon" href="/solidus/favicon.ico">
  <link rel="apple-touch-icon" href="/solidus/apple-touch-icon.png">
    
    <link rel="preload" href="/solidus/assets/css/73.styles.eab8b2ae.css" as="style"><link rel="preload" href="/solidus/assets/js/app.8a40fd93.js" as="script"><link rel="preload" href="/solidus/assets/js/68.f86e2d51.js" as="script"><link rel="prefetch" href="/solidus/assets/js/37.b74e6c67.js"><link rel="prefetch" href="/solidus/assets/js/1.bc8aaa90.js"><link rel="prefetch" href="/solidus/assets/js/2.d4e88151.js"><link rel="prefetch" href="/solidus/assets/js/3.e88dfa7e.js"><link rel="prefetch" href="/solidus/assets/js/4.7b7ea6ef.js"><link rel="prefetch" href="/solidus/assets/js/5.8bb30487.js"><link rel="prefetch" href="/solidus/assets/js/6.6430c6fd.js"><link rel="prefetch" href="/solidus/assets/js/7.573fb1d2.js"><link rel="prefetch" href="/solidus/assets/js/8.9360dac4.js"><link rel="prefetch" href="/solidus/assets/js/9.bc0513d0.js"><link rel="prefetch" href="/solidus/assets/js/10.9de329d0.js"><link rel="prefetch" href="/solidus/assets/js/11.3ef794fe.js"><link rel="prefetch" href="/solidus/assets/js/12.a9f19247.js"><link rel="prefetch" href="/solidus/assets/js/13.10bdcfc3.js"><link rel="prefetch" href="/solidus/assets/js/14.baeb49cf.js"><link rel="prefetch" href="/solidus/assets/js/15.4d27d13f.js"><link rel="prefetch" href="/solidus/assets/js/16.4dbd3af2.js"><link rel="prefetch" href="/solidus/assets/js/17.96a840b0.js"><link rel="prefetch" href="/solidus/assets/js/18.7af603a9.js"><link rel="prefetch" href="/solidus/assets/js/19.944f2391.js"><link rel="prefetch" href="/solidus/assets/js/20.0d3a03ca.js"><link rel="prefetch" href="/solidus/assets/js/21.6f8a3623.js"><link rel="prefetch" href="/solidus/assets/js/22.1ab16961.js"><link rel="prefetch" href="/solidus/assets/js/23.c5a09552.js"><link rel="prefetch" href="/solidus/assets/js/24.01d33ebc.js"><link rel="prefetch" href="/solidus/assets/js/25.368e20d3.js"><link rel="prefetch" href="/solidus/assets/js/26.0ff243dc.js"><link rel="prefetch" href="/solidus/assets/js/27.379ef86c.js"><link rel="prefetch" href="/solidus/assets/js/28.b1d94d4e.js"><link rel="prefetch" href="/solidus/assets/js/29.a582c0f5.js"><link rel="prefetch" href="/solidus/assets/js/30.75b3694e.js"><link rel="prefetch" href="/solidus/assets/js/31.32737bfe.js"><link rel="prefetch" href="/solidus/assets/js/32.68e6e17c.js"><link rel="prefetch" href="/solidus/assets/js/33.1e8efaaa.js"><link rel="prefetch" href="/solidus/assets/js/34.349d8482.js"><link rel="prefetch" href="/solidus/assets/js/35.78fdbd6e.js"><link rel="prefetch" href="/solidus/assets/js/36.0b2759fa.js"><link rel="prefetch" href="/solidus/assets/js/0.594398bd.js"><link rel="prefetch" href="/solidus/assets/js/38.bccdd185.js"><link rel="prefetch" href="/solidus/assets/js/39.ad7f257e.js"><link rel="prefetch" href="/solidus/assets/js/40.18604395.js"><link rel="prefetch" href="/solidus/assets/js/41.0e64d55c.js"><link rel="prefetch" href="/solidus/assets/js/42.83301a40.js"><link rel="prefetch" href="/solidus/assets/js/43.f596cdc7.js"><link rel="prefetch" href="/solidus/assets/js/44.07f48a7c.js"><link rel="prefetch" href="/solidus/assets/js/45.a59da533.js"><link rel="prefetch" href="/solidus/assets/js/46.adca66b1.js"><link rel="prefetch" href="/solidus/assets/js/47.61b9b3b8.js"><link rel="prefetch" href="/solidus/assets/js/48.94da6411.js"><link rel="prefetch" href="/solidus/assets/js/49.045da191.js"><link rel="prefetch" href="/solidus/assets/js/50.4aa1c95a.js"><link rel="prefetch" href="/solidus/assets/js/51.3f25a7cb.js"><link rel="prefetch" href="/solidus/assets/js/52.7fc3e97e.js"><link rel="prefetch" href="/solidus/assets/js/53.478f3a20.js"><link rel="prefetch" href="/solidus/assets/js/54.bee46771.js"><link rel="prefetch" href="/solidus/assets/js/55.d22fc5aa.js"><link rel="prefetch" href="/solidus/assets/js/56.2779de7d.js"><link rel="prefetch" href="/solidus/assets/js/57.9229e917.js"><link rel="prefetch" href="/solidus/assets/js/58.53b44760.js"><link rel="prefetch" href="/solidus/assets/js/59.b4ab94d2.js"><link rel="prefetch" href="/solidus/assets/js/60.024d7dba.js"><link rel="prefetch" href="/solidus/assets/js/61.c0c81db2.js"><link rel="prefetch" href="/solidus/assets/js/62.9766010b.js"><link rel="prefetch" href="/solidus/assets/js/63.a22ac1c9.js"><link rel="prefetch" href="/solidus/assets/js/64.711f7334.js"><link rel="prefetch" href="/solidus/assets/js/65.0f534f00.js"><link rel="prefetch" href="/solidus/assets/js/66.e38c54e1.js"><link rel="prefetch" href="/solidus/assets/js/67.a395f431.js"><link rel="prefetch" href="/solidus/assets/js/69.6f1fc43a.js"><link rel="prefetch" href="/solidus/assets/js/70.944af6a0.js"><link rel="prefetch" href="/solidus/assets/js/71.1f9a1de8.js"><link rel="prefetch" href="/solidus/assets/js/72.3e4d2c2a.js">
    <link rel="stylesheet" href="/solidus/assets/css/73.styles.eab8b2ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/solidus/" class="home-link router-link-active"><img src="/solidus/logo.svg" class="logo"><span class="site-name can-hide">
      Guidelines
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/solidus/" class="nav-link">Home</a></div><a href="https://github.com/solidusio/solidus" target="_blank" rel="noopener noreferrer" class="github-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/solidus/" class="nav-link">Home</a></div><a href="https://github.com/solidusio/solidus" target="_blank" rel="noopener noreferrer" class="github-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Getting Started</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Preferences</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Locations</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Payments</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Taxation</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Shipments</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Calculators</span><span class="arrow up"></span></p><ul class="sidebar-group-items"><li><a href="/solidus/calculators/overview.html" class="sidebar-link">Overview</a></li><li><a href="/solidus/calculators/promotion-calculators.html" class="active sidebar-link">Promotion calculators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/solidus/calculators/promotion-calculators.html#order-or-line-item-promotions" class="sidebar-link">Order or line item promotions</a></li><li class="sidebar-sub-header"><a href="/solidus/calculators/promotion-calculators.html#order-promotions-only" class="sidebar-link">Order promotions only</a></li><li class="sidebar-sub-header"><a href="/solidus/calculators/promotion-calculators.html#line-item-promotions-only" class="sidebar-link">Line item promotions only</a></li><li class="sidebar-sub-header"><a href="/solidus/calculators/promotion-calculators.html#free-shipping-promotions" class="sidebar-link">Free shipping promotions</a></li></ul></li><li><a href="/solidus/calculators/shipping-calculators.html" class="sidebar-link">Shipping calculators</a></li><li><a href="/solidus/calculators/tax-calculator.html" class="sidebar-link">Tax calculator</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Assets</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Views</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Products and Variants</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Inventory</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Returns</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Promotions</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Adjustments</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Orders</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Returns</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Users</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Upgrades</span><span class="arrow down"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Extensions</span><span class="arrow down"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="promotion-calculators"><a href="#promotion-calculators" aria-hidden="true" class="header-anchor">#</a> Promotion calculators</h1><p>Promotion calculators are similar to <a href="/solidus/calculators/shipping-calculators.html">shipping
calculators</a>: they calculate against your preferred
amounts, percentages, and currencies. The main difference is that promotions
adjust prices as discounts rather than charges.</p><p>Solidus includes a number of built-in promotion calculators. Because promotions
can adjust orders, line items, or shipping charges, note that some of the
built-in calculators can only be used on a subset of promotions.</p><p>The rest of this article summarizes the available promotion calculators, grouped
by the types of promotions they can calculator (either order, line item, or
shipment promotions).</p><h2 id="order-or-line-item-promotions"><a href="#order-or-line-item-promotions" aria-hidden="true" class="header-anchor">#</a> Order or line item promotions</h2><p>The following calculators are available to use on whole-order or line item
promotions:</p><ul><li><a href="#flat-rate">Flat rate</a></li><li><a href="#flexi-rate">Flexi rate</a></li><li><a href="#tiered-percent">Tiered percent</a></li></ul><h3 id="flat-rate"><a href="#flat-rate" aria-hidden="true" class="header-anchor">#</a> Flat rate</h3><p>The <a href="https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/flat_rate.rb" target="_blank" rel="noopener noreferrer"><code>Spree::Calculator::FlatRate</code> calculator</a> has the following
preferences:</p><ul><li><code>amount</code>: The amount per item to calculate.</li><li><code>currency</code>: The currency. The default value is your store's default currency
setting.</li></ul><p>This calculator takes the total of an applicable order or line item and
discounts a percentage of it.</p><h3 id="flexi-rate"><a href="#flexi-rate" aria-hidden="true" class="header-anchor">#</a> Flexi rate</h3><p>The <a href="https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/flexi_rate.rb" target="_blank" rel="noopener noreferrer"><code>Spree::Calculator::FlexiRate</code> calculator</a> provides a flexible
rate depending on the number of items on an order.</p><p>For example, you could sell one t-shirt for $20. But, if the customer buys five
t-shirts, the four additional t-shirt only costs $15.</p><p>It has the following preferences:</p><ul><li><code>first_item</code>: The discount rate of the first item(s).</li><li><code>additional_item</code>: The discount rate of subsequent items.</li><li><code>max_items</code>: The maximum number of items this discount applies to.</li><li><code>currency</code>: The currency. The default value is your store's default currency
setting.</li></ul><p>To replicate the example above, you could set the <code>first_item</code> to <code>0.0</code>, the
<code>additional_item</code> to <code>5.0</code>, and the <code>max_items</code> to <code>5</code>.</p><h3 id="tiered-percent"><a href="#tiered-percent" aria-hidden="true" class="header-anchor">#</a> Tiered percent</h3><p>The <a href="https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/tiered_percent.rb" target="_blank" rel="noopener noreferrer"><code>Spree::Calculator::TieredPercent</code> calculator</a> provides a
tiered percent discount. This allows you to charge a percentage-based discount
that depends on the order total (or applicable line items).</p><p>For example, you could set a base discount of 10%, then give a greater discount
on orders over $100 and $200:</p><table><thead><tr><th></th><th>Tier</th><th>Discount (%)</th></tr></thead><tbody><tr><td>0</td><td>Base</td><td>10%</td></tr><tr><td>1</td><td>Orders over $100</td><td>15%</td></tr><tr><td>2</td><td>Orders over $200</td><td>20%</td></tr></tbody></table><p>This calculator has the following preferences:</p><ul><li><code>base_percent</code>: The base discount for any order where the promotion applies.</li><li><code>tiers</code>: A hash where the key is the minimum order total for the tier and the
value is the tier discount. Using the example from the table above, the hash
could read: <code>{ $100=&gt;15%, $200=&gt;20% }</code>.</li><li><code>currency</code>: The currency. The default value is your store's default currency
setting.</li></ul><h2 id="order-promotions-only"><a href="#order-promotions-only" aria-hidden="true" class="header-anchor">#</a> Order promotions only</h2><p>The following calculators are available to use with order promotions only:</p><ul><li><a href="#tiered-flat-rate">Tiered flat rate</a></li><li><a href="#flat-percent-item-total">Flat percent (item total)</a></li></ul><h3 id="tiered-flat-rate"><a href="#tiered-flat-rate" aria-hidden="true" class="header-anchor">#</a> Tiered flat rate</h3><p>The <a href="https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/tiered_flat_rate.rb" target="_blank" rel="noopener noreferrer"><code>Spree::Calculator::TieredFlatRate</code> calculator</a> provides
a tiered flat rate discount. This allows you to charge a rate-based discount
that depends on the order total. For example, you could set a base discount of
$10, then give a greater discount on orders over $100, $200, and $500:</p><table><thead><tr><th></th><th>Tier</th><th>Discount ($)</th></tr></thead><tbody><tr><td>0</td><td>Base</td><td>$10</td></tr><tr><td>1</td><td>Orders over $100</td><td>$15</td></tr><tr><td>2</td><td>Orders over $200</td><td>$20</td></tr><tr><td>3</td><td>Orders over $500</td><td>$25</td></tr></tbody></table><p>This calculator has the following preferences:</p><ul><li><code>base_amount</code>: The base discount for any order where the promotion applies.</li><li><code>tiers</code>: A hash where the key is the minimum order total for the tier and the
value is the tier discount: <code>{ tier=&gt;discount_amount }</code>.</li><li><code>currency</code>: The currency. The default value is your store's default currency
setting.</li></ul><h3 id="flat-percent-item-total"><a href="#flat-percent-item-total" aria-hidden="true" class="header-anchor">#</a> Flat percent (item total)</h3><p>The <a href="https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/flat_percent_item_total.rb" target="_blank" rel="noopener noreferrer"><code>Spree::Calculator::FlatPercentItemTotal</code></a>
calculator provides a flat, percentage-based discount on an order. In the
<code>solidus_backend</code> interface administrators can use this calculator by choosing
the whole-order calculator labeled &quot;Flat Percent&quot;. It has the following
preference:</p><ul><li><code>flat_percent</code>: The percentage that the order should be discounted.</li></ul><h2 id="line-item-promotions-only"><a href="#line-item-promotions-only" aria-hidden="true" class="header-anchor">#</a> Line item promotions only</h2><p>The following calculators are available to use with line item promotions only:</p><ul><li><a href="#distributed-amount">Distributed amount</a></li><li><a href="#percent-on-line-item">Percent on line item</a></li></ul><h3 id="distributed-amount"><a href="#distributed-amount" aria-hidden="true" class="header-anchor">#</a> Distributed amount</h3><p>The [<code>Spree::Calculator::DistributedAmount</code> calculator][distributed-amount]
provides an amount-based discount on all of the applicable line items in an
order. The discount amount is distributed across all of the line items.</p><p>For example, if your promotion offers a $5 discount and a customer orders a $20
item as well as a $10 item, then the discount is distributed across both items:
$3.33 (on the $20 item) and $1.67 (on the $10 item).</p><p>This calculator has the following preferences:</p><ul><li><code>amount</code>: The discount amount given if the line items should be discounted.</li><li><code>currency</code>: The currency. The default value is your store's default currency
setting.</li></ul><h3 id="percent-on-line-item"><a href="#percent-on-line-item" aria-hidden="true" class="header-anchor">#</a> Percent on line item</h3><p>The [<code>Spree::Calculator::PercentOnLineItem</code> calculator][percent-on-line-item]
provides a percentage-based discount for each applicable line item in an order.
In the <code>solidus_backend</code> interface, this calculator is labeled &quot;Percent Per
Item&quot;. It has the following preference:</p><ul><li><code>percent</code>: The percentage discount that should be given to each applicable
line item.</li></ul><p>[distributed-amount]: https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/distributed_amount.rb)
[percent-on-line-item]: https://github.com/solidusio/solidus/blob/master/core/app/models/spree/calculator/percent_on_line_item.rb)</p><h2 id="free-shipping-promotions"><a href="#free-shipping-promotions" aria-hidden="true" class="header-anchor">#</a> Free shipping promotions</h2><p>You can create promotions that negate all shipping charges on an order. This
type of promotion does not require a specific calculator. Instead, it uses the
<a href="https://github.com/solidusio/solidus/blob/master/core/app/models/spree/promotion/actions/free_shipping.rb" target="_blank" rel="noopener noreferrer"><code>Spree::Promotion::Action::FreeShipping</code> promotion
action</a> directly.</p></div><div class="content edit-link"><a href="https://github.com/solidusio/solidus/edit/master/guides/calculators/promotion-calculators.md" target="_blank" rel="noopener noreferrer">Edit this page</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/solidus/calculators/overview.html" class="prev">
          Overview
        </a></span><span class="next"><a href="/solidus/calculators/shipping-calculators.html">
          Shipping calculators
        </a> →
      </span></p></div></div></div></div>
    <script src="/solidus/assets/js/68.f86e2d51.js" defer></script><script src="/solidus/assets/js/app.8a40fd93.js" defer></script>
  </body>
</html>
